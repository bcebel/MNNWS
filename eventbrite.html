<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eventbrite API Test</title>
<style>
body {
font-family: Arial, sans-serif;
max-width: 1000px;
margin: 20px auto;
padding: 0 10px;
}
#json-output {
background-color: #f4f4f4;
padding: 15px;
border: 1px solid #ddd;
white-space: pre-wrap;
word-wrap: break-word;
}
.attribution {
font-size: 0.8em;
color: #555;
margin-top: 10px;
}
</style>
</head>
<body>
<h1>ATX Short Film Showcase Events (Raw API Output)</h1>
<pre id="json-output">Loading...</pre>
<p class="attribution">Events sourced from <a href="https://www.eventbrite.com" target="_blank">Eventbrite</a>.</p>

<script>
document.addEventListener('DOMContentLoaded', async function() {
  const outputEl = document.getElementById('json-output');

  try {
    const organizationId = '34019997591';
    // Using the private token as per user's request for testing purposes.
    // WARNING: This is a major security risk in a production environment.
    const privateToken = 'N2GGJWE6NBAHR7FB7JMU';

    const response = await fetch(
      `https://www.eventbriteapi.com/v3/organizations/${organizationId}/events/`,
      {
        headers: {
          Authorization: `Bearer ${privateToken}`,
        },
      }
    );

    const data = await response.json();

    if (!response.ok) {
      outputEl.textContent = `API Error:\n${JSON.stringify(data, null, 2)}`;
      throw new Error(`API request failed with status ${response.status}`);
    }

    outputEl.textContent = JSON.stringify(data, null, 2);

  } catch (error) {
    console.error('Error fetching events:', error);
    outputEl.textContent = `Failed to load events. See console for details.\n${error}`;
  }
});
</script>
</body>
</html>
